### **What is CSRF (Cross-Site Request Forgery)?** ğŸ”

CSRF (Cross-Site Request Forgery) is a type of attack where a **hacker tricks a user** into performing an **unwanted action** on a website **where they are already logged in**.

---

### **Simple Example of CSRF Attack** ğŸš¨

1ï¸âƒ£ **You are logged into your bank website (`mybank.com`)** and have an active session.  
2ï¸âƒ£ **A hacker sends you a link to a malicious website (`evil.com`)** via email.  
3ï¸âƒ£ **When you visit `evil.com`, it secretly sends a request like this:**

```html
<img src="https://mybank.com/transfer?amount=1000&to=hacker_account" />
```

4ï¸âƒ£ Since you're already logged into `mybank.com`, the request **automatically** transfers money from your account to the hacker! ğŸ˜¨

---

### **How to Prevent CSRF?** âœ…

Spring Security protects against CSRF attacks by **default**, using **CSRF tokens**.

#### **How CSRF Token Works?** ğŸ›¡ï¸

1ï¸âƒ£ When a user loads a form, the server generates a **CSRF token** and sends it.  
2ï¸âƒ£ The form must include this token when submitting.  
3ï¸âƒ£ The server checks if the token is valid before processing the request.

#### **Example of a CSRF Token in a Form:**

```html
<form action="/transfer" method="POST">
  <input type="hidden" name="_csrf" value="RANDOM_TOKEN_VALUE" />
  <button type="submit">Transfer Money</button>
</form>
```

If the request **does not** have a valid CSRF token, the server **rejects it**! ğŸš€

---

### **Disabling CSRF in APIs (Stateless Authentication)**

Since APIs **donâ€™t use sessions**, CSRF protection is usually **disabled**:

```java
http.csrf(csrf -> csrf.disable());
```

Instead, APIs use **JWT tokens** for security.

---

### **Key Takeaways** ğŸ“

âœ… CSRF **tricks** users into making unintended actions.  
âœ… CSRF protection uses **tokens** to verify legitimate requests.  
âœ… APIs often **disable CSRF** because they use **JWT authentication** instead.

ğŸš€ **Conclusion:** Always enable CSRF protection for web apps **with forms** but disable it for **stateless APIs**!
